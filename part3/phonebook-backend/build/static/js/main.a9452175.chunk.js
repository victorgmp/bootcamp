(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{24:function(e,n,t){},44:function(e,n,t){"use strict";t.r(n);var r=t(1),c=t.n(r),a=t(18),o=t.n(a),u=(t(24),t(19)),i=t(7),s=t(9),d=t(5),l=t(4),j=t.n(l),b="/api/persons",f=function(){return j.a.get(b).then((function(e){return e.data}))},h=function(e){return j.a.post(b,e).then((function(e){return e.data}))},m=function(e,n){return j.a.put("".concat(b,"/").concat(e),n).then((function(e){return e.data}))},O=function(e){return j.a.delete("".concat(b,"/").concat(e)).then((function(e){return e.data}))},p=t(0),v=function(e){var n=e.filter,t=e.onChange;return Object(p.jsxs)("div",{children:["filter shown with:",Object(p.jsx)("input",{name:"filter",value:n,onChange:t})]})},x=function(e){var n=e.values,t=e.handleChange,r=e.handleSubmit;return Object(p.jsxs)("form",{onSubmit:r,children:[Object(p.jsxs)("div",{children:["name: ",Object(p.jsx)("input",{name:"name",value:n.name,onChange:t})]}),Object(p.jsxs)("div",{children:["number: ",Object(p.jsx)("input",{name:"number",value:n.number,onChange:t})]}),Object(p.jsx)("div",{children:Object(p.jsx)("button",{type:"submit",children:"add"})})]})},g=function(e){var n=e.persons,t=e.handleDelete;return Object(p.jsx)("ul",{children:n.map((function(e){return Object(p.jsxs)("li",{children:[e.name,": ",e.number,Object(p.jsx)("button",{onClick:function(){return t(e.id,e.name)},children:"delete"})]},e.id)}))})},y=function(e){var n=e.message;return null===n?null:Object(p.jsx)("div",{className:"error"===n.type?"error":"success",children:n.content})},w=function(){var e=Object(r.useState)([]),n=Object(d.a)(e,2),t=n[0],c=n[1],a=Object(r.useState)({name:"",number:""}),o=Object(d.a)(a,2),l=o[0],j=o[1],b=Object(r.useState)(""),w=Object(d.a)(b,2),C=w[0],S=w[1],k=Object(r.useState)(null),D=Object(d.a)(k,2),A=D[0],E=D[1];Object(r.useEffect)((function(){f().then((function(e){c(e)})).catch((function(e){console.log("error trying to get users",e)}))}),[]);var I=t.filter((function(e){return e.name.toLowerCase().indexOf(C.toLowerCase())>-1})),J=function(e){return window.confirm(e)};return Object(p.jsxs)("div",{children:[Object(p.jsx)("h1",{children:"Phonebook"}),Object(p.jsx)(y,{message:A}),Object(p.jsx)(v,{filter:C,onChange:function(e){return S(e.target.value)}}),Object(p.jsx)("h2",{children:"Add a new"}),Object(p.jsx)(x,{values:l,handleChange:function(e){var n=e.target,t=n.name,r=n.value;j(Object(s.a)(Object(s.a)({},l),{},Object(i.a)({},t,r)))},handleSubmit:function(e){e.preventDefault();var n={name:l.name,number:l.number};if(t.find((function(e){return e.name===l.name}))){var r="".concat(l.name," is already added to phonebook, replace the old number with a new one?");if(J(r)){var a=t.find((function(e){return e.name===l.name}));m(a.id,n).then((function(e){c(t.map((function(n){return n.id!==a.id?n:e}))),E({content:"Updated ".concat(l.name),type:"success"})})).catch((function(e){console.log("error trying to update user",e),E({content:"Information of ".concat(l.name," has already been removed from server"),type:"error"})}))}}else h(n).then((function(e){c([].concat(Object(u.a)(t),[e])),E({content:"Added ".concat(l.name),type:"success"})})).catch((function(e){console.log("error trying to create user",e)}))}}),Object(p.jsx)("h2",{children:"Numbers"}),Object(p.jsx)(g,{persons:I,handleDelete:function(e,n){return function(e,n){var r="do you really want to eliminate ".concat(n,"?");J(r)&&O(e).then((function(n){c(t.filter((function(n){return n.id!==e})))}))}(e,n)}})]})};o.a.render(Object(p.jsx)(c.a.StrictMode,{children:Object(p.jsx)(w,{})}),document.getElementById("root"))}},[[44,1,2]]]);
//# sourceMappingURL=main.a9452175.chunk.js.map